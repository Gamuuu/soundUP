{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/siwakorn.p.1010/Documents/sounduUP/src/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error('Missing Supabase environment variables');\n}\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,yLAAY,EAAC,aAAa"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///Users/siwakorn.p.1010/Documents/sounduUP/src/app/api/auth/register/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { supabase } from '../../../../lib/supabase';\n\nexport async function POST(request) {\n  try {\n    const { name, email, password } = await request.json();\n\n    if (!email || !password || !name) {\n      return NextResponse.json(\n        { message: 'Name, email, and password are required' },\n        { status: 400 }\n      );\n    }\n\n    // Check if user already exists\n    const { data: existingUser, error: findError } = await supabase\n      .from('User')\n      .select('id')\n      .eq('email', email)\n      .single();\n\n    if (existingUser) {\n      return NextResponse.json(\n        { message: 'User already exists' },\n        { status: 409 }\n      );\n    }\n\n    // Create new user\n    // NOTE: Password should be hashed in production using bcrypt!\n    const userId = crypto.randomUUID();\n    const now = new Date().toISOString();\n\n    const { data: newUser, error: insertError } = await supabase\n      .from('User')\n      .insert({\n        id: userId,\n        name,\n        email,\n        password, // Plain text password\n        role: 'USER',\n        createdAt: now,\n        updatedAt: now,\n      })\n      .select('id, name, email')\n      .single();\n\n    if (insertError) {\n      console.error('Insert Error:', insertError);\n      return NextResponse.json(\n        { message: 'Failed to create user', error: insertError.message },\n        { status: 500 }\n      );\n    }\n\n    return NextResponse.json(\n      { message: 'User created successfully', user: newUser },\n      { status: 201 }\n    );\n\n  } catch (error) {\n    console.error('Registration Error:', error);\n    return NextResponse.json(\n      { message: 'Internal Server Error', error: error.message },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEpD,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM;YAChC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAyC,GACpD;gBAAE,QAAQ;YAAI;QAElB;QAEA,+BAA+B;QAC/B,MAAM,EAAE,MAAM,YAAY,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,oIAAQ,CAC5D,IAAI,CAAC,QACL,MAAM,CAAC,MACP,EAAE,CAAC,SAAS,OACZ,MAAM;QAET,IAAI,cAAc;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAAsB,GACjC;gBAAE,QAAQ;YAAI;QAElB;QAEA,kBAAkB;QAClB,8DAA8D;QAC9D,MAAM,SAAS,OAAO,UAAU;QAChC,MAAM,MAAM,IAAI,OAAO,WAAW;QAElC,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,oIAAQ,CACzD,IAAI,CAAC,QACL,MAAM,CAAC;YACN,IAAI;YACJ;YACA;YACA;YACA,MAAM;YACN,WAAW;YACX,WAAW;QACb,GACC,MAAM,CAAC,mBACP,MAAM;QAET,IAAI,aAAa;YACf,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAyB,OAAO,YAAY,OAAO;YAAC,GAC/D;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAA6B,MAAM;QAAQ,GACtD;YAAE,QAAQ;QAAI;IAGlB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAyB,OAAO,MAAM,OAAO;QAAC,GACzD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}